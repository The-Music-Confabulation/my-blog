<%- include('partials/header'); -%>

<hr style="visibility:hidden">

<body>
  <div class="container-fluid body-block">
    <div class="article-blog">
      <div class="row">
        <div class="col-md-2 side">
          <div class="position-sticky row" style="top: 2rem;">
            <div class=" mb-3 rounded about-main">
              <h3 class="">about</h3>
              <p class="mb-0 ps-2" id="about-text"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                  fill="currentColor" class="bi bi-emoji-smile" viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                  <path
                    d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z" />
                </svg> a music blog to share <br> your stories and memories or <br>simply to
                introduce others about <br> your favorite artists.</p>
            </div>


            <div class=" some-main">
              <h3 class="">social media</h3>
              <ol class="list-unstyled">
                <li><a class="text-decoration-none  ps-2 " href="https://discord.gg/gkmAGEbsAG">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                      class="bi bi-discord" viewBox="0 0 16 16">
                      <path
                        d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z" />
                    </svg> discord</a></li>
                <li><a class="text-decoration-none  ps-2 " href="https://github.com/ttran293/my-blog"><svg
                      xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github"
                      viewBox="0 0 16 16">
                      <path
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
                    </svg> github</a>
                </li>
              </ol>
            </div>

            <div class="theme-settings">
              <h3 class="">themes</h3>
              <div class="theme-switches">
                <div data-theme="light" class="switch" id="switch-1"></div>
                <div data-theme="dark" class="switch inline-block" id="switch-4"></div>
                <div data-theme="cadetblue" class="switch inline-block" id="switch-2"></div>
                <div data-theme="coral" class="switch inline-block" id="switch-3"></div>
              </div>
            </div>

          </div>
        </div>
        <div class="col-md-10 main ">
          <% for  (var a = 0; a < songs.length; a++) { %>
          <article class="blog-post border border-2 border-dark rounded p-3 mb-3   ">
            <h2 class="blog-post-title ">
              <a class="text-decoration-none " href="/posts/<%= songs[a]._id %>"><%=songs[a].title %></a>
            </h2>
            <p class="font-weight-light"><%=songs[a].date %> by
              <a href="/profile/<%= songs[a].author %>" class="text-decoration-none "><%= songs[a].author %></a>
            </p>
            <p>
              <% if (isLoggedIn) { %>
                 <i  id="<%=a%>heart-icon" class="fa-solid fa-heart" 
                 onclick="updateLike('<%= songs[a]._id %>','<%= songs[a].title%>', '<%= songs[a].like.length %>', '<%= a %>', '<%= current_user_info %>')">
                </i>
              <% } else { %>
                 <a href="/login"><i class="fa-solid fa-heart"></i></a>
              <% } %>
             
              <% if (songs[a].like.length >= 2 ) { %>
                  <span class="fw-bold"> 
                  liked by 
                  <% for( let index = 0; index <= 1; index++ ) { %>
                      <%= songs[a].like[index].like_username %>,
                  <% } %> and <span id="<%=a%>other-likes"><%= songs[a].like.length -2 %></span> others 
                  </span>
              <% } else if (songs[a].like.length == 0) { %>
                  <span id="<%= a %>other-likes" class="fw-bold me-2"> 
                    <%= songs[a].like.length %>
                  </span>
              <% } else {%>
                  <span class="fw-bold">liked by</span>
                  <span class="fw-bold" id="<%=a%>other-likes"> <%= songs[a].like[0].like_username %></span>
                </span>
              <% } %>      
            </p>
            <p>
              <a class="text-decoration-none" id="" href="/posts/<%= songs[a]._id %>"><i class="fa-solid fa-message"></i></a>
              <span class="fw-bold me-2"> <%=songs[a].comments.length %> comments</span>
              <i class="fa-solid fa-hashtag"></i>
              <span class="fw-bold"> <%=songs[a].tag %> </span>
            </p>
            <div class="ratio ratio-16x9 ">
              <iframe class="border border-2 border-dark" src="https://www.youtube.com/embed/<%= songs[a].url %>"
                title="YouTube video" allowfullscreen frameborder="0"></iframe>
            </div>
          </article>
          <% } %>


          <div class="btn-group" role="group" aria-label="Default button group">
            <a class="btn btn-dark border-2" href="?page=1" aria-label="Previous">
              <span aria-hidden="true" class="fw-bold">&laquo;</span>
            </a>

            <% for  (var a = 1; a <= pages; a++) { %>
            <a class="btn btn-dark border-2 border-end-0 border-start-0" href="?page=<%=a; %>" aria-label="Previous">
              <span aria-hidden="true" class="fw-bold"><%= a; %></span>
            </a>
            <% } %>

            <a class="btn btn-dark border-2" href="?page=<%=pages%>" aria-label="Previous">
              <span aria-hidden="true" class="fw-bold">&raquo;</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="theme-button">
      <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#exampleModal">
        settings
      </button>

      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">settings</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="theme-settings-mobile">
                <h3 class="">themes</h3>
                <div class="theme-switches">
                  <div data-theme="light" class="switch" id="switch-1"><span class="ps-5 fw-bold">light</span></div>

                  <div data-theme="dark" class="switch" id="switch-4"><span class="ps-5 fw-bold">dark</span></div>

                  <div data-theme="cadetblue" class="switch" id="switch-2"><span class="ps-5 fw-bold">cadetblue</span>
                  </div>

                  <div data-theme="coral" class="switch" id="switch-3"><span class="ps-5 fw-bold">coral</span></div>

                  <!-- <div data-theme="grey" class="switch " id="switch-4"><span class="ps-5 fw-bold">gray</span></div> -->

                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-dark" data-bs-dismiss="modal">close</button>
              <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="s-media pt-3">
      <span class="inline"><a class="text-decoration-none text-dark ps-2" href="https://discord.gg/gkmAGEbsAG"><i class="fa-brands fa-discord"></i> discord</a>
      </span>

      <span class="inline"><a class="text-decoration-none text-dark ps-2"
          href="https://github.com/ttran293/my-blog"><i class="fa-brands fa-github"></i> github</a>
      </span>
      </ol>
    </div>

    <div class="media fixed-bottom ">
      <div class="nav-b flex-column flex-md-row align-items-end">

        <nav class=" mt-2 mt-md-0 ms-md-auto pb-1">
          <!-- <a href="/" class="nav-link px-2 link-secondary">home</a> -->
          <a href="/" class="nav-link mx-2 text-decoration-none nav-a" id="compose"><i class="fa-solid fa-house"></i></a>

          <a href="/compose" class="nav-link mx-2 text-decoration-none nav-a " id="compose"><i class="fa-solid fa-plus"></i></a>
          <!-- <a href="/help" class="nav-link mx-2 text-decoration-none text-dark nav-a badge  ">help</a> -->

          <% if (!isLoggedIn) { %>
          <a href="/login" class="nav-link mx-2 text-decoration-none nav-a" id="logi"><i class="fa-solid fa-right-to-bracket"></i></a>
          <a href="/signup" class="nav-link mx-2 text-decoration-none nav-a" id="signu"><i class="fa-solid fa-user-plus"></i></a>

          <%} else { %>
          <a href="/logout" class="nav-link mx-2 text-decoration-none nav-a " id="logout"><i class="fa-solid fa-right-from-bracket"></i></a>
          <% } %>

          <a href="/profile" class="nav-link mx-2 text-decoration-none nav-a" id="profile"><i class="fa-solid fa-cat"></i></a>


        </nav>
      </div>
    </div>

    <script src="/scripts/scripts.js"></script>
</body>
<%- include('partials/footer'); -%>